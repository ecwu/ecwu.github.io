<!doctype html><html lang=en><head><link rel=icon type=image/x-icon href=https://ecwuuuuu.com/favicon.ico><link rel=stylesheet href=https://ecwuuuuu.com/css/style.min.353af45b5fae1dd48bb4aa5c33faa843555c667e700e2c0d8d35489ab8b210b6.css integrity="sha256-NTr0W1+uHdSLtKpcM/qoQ1VcZn5wDiwNjTVImriyELY="><meta charset=utf-8><title>Homelab：我的赛博积木 - 内网服务 - ECWU's Notebook</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Homepage and blog for Zhenghao Wu (ECWU), sharing thoughts on technology, everyday experiences, and photography. Engaging with the community through knowledge sharing."><meta name=keywords content="Homelab,Docker,Container,Images,Service,Self-host"><meta name=author content="ECWUUUUU"><script>(function(){const e=localStorage.getItem("current-theme");e===null?window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("current-theme","dark"),document.documentElement.classList.add("dark")):(localStorage.setItem("current-theme","light"),document.documentElement.classList.remove("dark")):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})(),window.updateMermaidTheme=()=>{if(typeof mermaid!="undefined"){const e=document.documentElement.classList.contains("dark"),t=document.querySelectorAll("pre.mermaid");t.forEach(e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)}),e?(initMermaidDark(),mermaid.run()):(initMermaidLight(),mermaid.run())}};function change_color_mode(){localStorage.getItem("current-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("current-theme","dark"),change_discussion_color_mode(),updateMermaidTheme()):(document.documentElement.classList.remove("dark"),localStorage.setItem("current-theme","light"),change_discussion_color_mode(),updateMermaidTheme())}function change_discussion_color_mode(){const t=localStorage.getItem("current-theme")==="light"?"light":"dark",n={setConfig:{theme:t}},e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:n},"https://giscus.app")}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("header-theme-button").addEventListener("click",change_color_mode)})</script><link rel=icon type=image/x-icon href=https://ecwuuuuu.com/favicon.ico><link rel=stylesheet href=https://ecwuuuuu.com/css/style.min.353af45b5fae1dd48bb4aa5c33faa843555c667e700e2c0d8d35489ab8b210b6.css integrity="sha256-NTr0W1+uHdSLtKpcM/qoQ1VcZn5wDiwNjTVImriyELY="><meta charset=utf-8><title>Homelab：我的赛博积木 - 内网服务 - ECWU's Notebook</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Homepage and blog for Zhenghao Wu (ECWU), sharing thoughts on technology, everyday experiences, and photography. Engaging with the community through knowledge sharing."><meta name=keywords content="Homelab,Docker,Container,Images,Service,Self-host"><meta name=author content="ECWUUUUU"><script>(function(){const e=localStorage.getItem("current-theme");e===null?window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("current-theme","dark"),document.documentElement.classList.add("dark")):(localStorage.setItem("current-theme","light"),document.documentElement.classList.remove("dark")):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})(),window.updateMermaidTheme=()=>{if(typeof mermaid!="undefined"){const e=document.documentElement.classList.contains("dark"),t=document.querySelectorAll("pre.mermaid");t.forEach(e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)}),e?(initMermaidDark(),mermaid.run()):(initMermaidLight(),mermaid.run())}};function change_color_mode(){localStorage.getItem("current-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("current-theme","dark"),change_discussion_color_mode(),updateMermaidTheme()):(document.documentElement.classList.remove("dark"),localStorage.setItem("current-theme","light"),change_discussion_color_mode(),updateMermaidTheme())}function change_discussion_color_mode(){const t=localStorage.getItem("current-theme")==="light"?"light":"dark",n={setConfig:{theme:t}},e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:n},"https://giscus.app")}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("header-theme-button").addEventListener("click",change_color_mode)})</script></head><body class="transition-colors duration-300"><div class=pt-6><div class="nav-title flex flex-row flex-wrap gap-2"><a href=https://ecwuuuuu.com/><svg class="w-36 fill-gray-900 dark:fill-gray-200" fill="currentColor" viewBox="0 0 204.24 43.44"><path d="M0 43.08V.36h18.24v5.76H6.12v12.54h10.56v5.76H6.12v12.54h12.12v6.12H0z"/><path d="M41.64 30.9v2.64c0 1.32-.25 2.57-.75 3.75s-1.19 2.23-2.07 3.15-1.91 1.65-3.09 2.19-2.45.81-3.81.81c-1.16.0-2.34-.16-3.54-.48s-2.28-.88-3.24-1.68-1.75-1.83-2.37-3.09c-.62-1.26-.93-2.87-.93-4.83V9.84c0-1.4.24-2.7.72-3.9s1.16-2.24 2.04-3.12 1.93-1.57 3.15-2.07C28.97.25 30.32.0 31.8.0c2.88.0 5.22.94 7.02 2.82.88.92 1.57 2.01 2.07 3.27s.75 2.63.75 4.11v2.4h-6.12v-2.04c0-1.2-.34-2.24-1.02-3.12s-1.6-1.32-2.76-1.32c-1.52.0-2.53.47-3.03 1.41s-.75 2.13-.75 3.57v21.84c0 1.24.27 2.28.81 3.12s1.51 1.26 2.91 1.26c.4.0.83-.07 1.29-.21s.89-.37 1.29-.69c.36-.32.66-.76.9-1.32s.36-1.26.36-2.1v-2.1h6.12z"/><path d="M78.36.36 72 43.08h-5.76l-4.68-27.72h-.12l-4.62 27.72h-5.76L44.7.36h6.48l3.06 27.12h.12l4.8-27.12h4.68l4.98 27.78h.12l2.94-27.78H78.36z"/><path d="M102 .36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16-2.48.78-3.84.78-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36H102z"/><path d="M127.56.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16-2.48.78-3.84.78-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36h6.12z"/><path d="M153.12.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08S147 34.4 147 32.88V.36h6.12z"/><path d="M178.68.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36H165v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08c1.08.0 1.98-.36 2.7-1.08s1.08-1.84 1.08-3.36V.36h6.12z"/><path d="M204.24.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36h6.12z"/></svg><p class=sr-only>ECWU Homepage</p></a></div><nav aria-label=navbar class="mb-3 mr-8"><ol role=list class="flex flex-wrap"><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Home</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/post/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Posts</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/photography/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Photos</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/series/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Series</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/page/about/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>About</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/page/friends/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Friends</a></div></li></ol></nav><div class="flex items-center space-x-2"><div class="w-6 h-6 inline-flex items-center justify-center rounded-lg bg-white dark:bg-black shadow-inner ring-1 ring-black/5"><i id=header-theme-button data-feather=sun class="site-header-navlink rounded cursor-pointer"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-icon lucide-sun h-4 w-4 block dark:hidden fill-gray-900 dark:fill-gray-200"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-icon lucide-moon h-4 w-4 hidden dark:block fill-gray-900 dark:fill-gray-200"><path d="M20.985 12.486a9 9 0 11-9.473-9.472c.405-.022.617.46.402.803a6 6 0 008.268 8.268c.344-.215.825-.004.803.401"/></svg></i></div><span class="dark:hidden text-sm">To Dark Mode</span>
<span class="hidden dark:block dark:text-gray-200 text-sm">To Light Mode</span></div></div><figure class="ml-[-12.5vw] mt-12 mb-12 h-96 w-screen relative overflow-hidden"><img class="object-cover object-center w-full h-96" src="https://unsplash.com/photos/8bghKxNU1j0/download?ixid=MnwxMjA3fDB8MXxzZWFyY2h8MTF8fHdpZml8ZW58MHx8fHwxNjY1MDg2OTQx&amp;force=true&amp;w=2400" alt="Featured Images"><figcaption class="text-sm absolute bottom-0 right-0 pr-5 bg-gray-900 text-gray-500 px-2">Photo by JJ Ying on Unsplash</figcaption></figure><div class="mb-12 mt-16 w-content"><h1 class="text-gray-900 dark:text-gray-200">Homelab：我的赛博积木 - 内网服务</h1><div class="text-gray-700 dark:text-gray-400"><div class=space-y-1><p><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-signature-icon lucide-signature h-5 w-5 inline-block"><path d="m21 17-2.156-1.868A.5.5.0 0018 15.5v.5a1 1 0 01-1 1h-2a1 1 0 01-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 000 5c4.153.0 4.745-11.295 5.708-13.5a2.5 2.5.0 113.31 3.284"/><path d="M3 21h18"/></svg> Zhenghao Wu</p><p><span class=mr-2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-clock-icon lucide-calendar-clock h-5 w-5 inline-block"><path d="M16 14v2.2l1.6 1"/><path d="M16 2v4"/><path d="M21 7.5V6a2 2 0 00-2-2H5A2 2 0 003 6v14a2 2 0 002 2h3.5"/><path d="M3 10h5"/><path d="M8 2v4"/><circle cx="16" cy="16" r="6"/></svg> Saturday, October 15, 2022
</span><span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-clock-icon lucide-clipboard-clock h-5 w-5 inline-block"><path d="M16 14v2.2l1.6 1"/><path d="M16 4h2a2 2 0 012 2v.832"/><path d="M8 4H6A2 2 0 004 6v14a2 2 0 002 2h2"/><circle cx="16" cy="16" r="6"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg> 7 min read</span></p><p><span class=mr-2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flag-icon lucide-flag h-5 w-5 inline-block"><path d="M4 22V4a1 1 0 01.4-.8A6 6 0 018 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0120 4v10a1 1 0 01-.4.8A6 6 0 0116 16c-3 0-5-2-8-2a6 6 0 00-4 1.528"/></svg>
Status: Finished
</span><span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-waypoints-icon lucide-waypoints h-5 w-5 inline-block"><circle cx="12" cy="4.5" r="2.5"/><path d="m10.2 6.3-3.9 3.9"/><circle cx="4.5" cy="12" r="2.5"/><path d="M7 12h10"/><circle cx="19.5" cy="12" r="2.5"/><path d="m13.8 17.7 3.9-3.9"/><circle cx="12" cy="19.5" r="2.5"/></svg>
Importance: 9</span></p><p><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-scroll-text-icon lucide-scroll-text h-5 w-5 inline-block"><path d="M15 12h-5"/><path d="M15 8h-5"/><path d="M19 17V5a2 2 0 00-2-2H4"/><path d="M8 21h12a2 2 0 002-2v-1a1 1 0 00-1-1H11a1 1 0 00-1 1v1a2 2 0 11-4 0V5A2 2 0 102 5v2a1 1 0 001 1h3"/></svg> <a href=#article-info-card>Post Details</a></p></div></div></div><div class="w-content bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-400 px-5 py-3"><p>This post is part 4 of 8 in the <b>HomeLab</b> series.</p><details class=mt-3><summary class="cursor-pointer hover:text-gray-900 dark:hover:text-gray-200 font-medium">View all articles in this series</summary><ol class="mt-2 ml-8 space-y-1"><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/nas-ipv6-ddns/ class=hover:underline>Making Synology NAS accessible from the Internet using IPv6 and DDNS</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/more-on-ipv6-firewall/ class=hover:underline>More on IPv6 Firewall - EUI-64</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-intro/ class=hover:underline>Homelab：我的赛博积木</a></li><li class="list-decimal ml-4"><span class="font-bold text-gray-900 dark:text-gray-100">Homelab：我的赛博积木 - 内网服务</span> <span class=text-sm>(current)</span></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-internet/ class=hover:underline>Homelab：我的赛博积木 - 公网服务</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-architecture/ class=hover:underline>Homelab：我的赛博积木 - 组成与架构</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-accessing/ class=hover:underline>Homelab：我的赛博积木 - 访问</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-future/ class=hover:underline>Homelab：我的赛博积木 - 展望</a></li></ol></details></div><main><article class="prose dark:prose-invert lg:prose-xl md:prose-lg prose-ul:leading-5 prose-ol:leading-5"><section class=mb-8><details closed class=toc><summary>Table of Contents</summary><div class=text-sm><nav id=TableOfContents><ul><li><a href=#半自动媒体中心>半自动媒体中心</a></li><li><a href=#dsm-以外的文件--多媒体管理>DSM 以外的文件 / 多媒体管理</a><ul><li><a href=#在线文件浏览器filebrowser>在线文件浏览器：Filebrowser</a></li><li><a href=#漫画阅读器komga>漫画阅读器：Komga</a></li><li><a href=#文档数字化管理paperless-ngx>文档数字化管理：Paperless-NGX</a></li></ul></li><li><a href=#容器管理和系统状态监控>容器管理和系统状态监控</a><ul><li><a href=#容器管理portainer>容器管理：Portainer</a></li><li><a href=#测速服务端liberspeed>测速服务端：Liberspeed</a></li><li><a href=#服务门户homarr>服务门户：Homarr</a></li><li><a href=#系统实时信息dashdot>系统实时信息：DashDot</a></li></ul></li><li><a href=#排版渲染矢量图绘图>排版渲染、矢量图绘图</a></li><li><a href=#家庭体验提升>家庭体验提升</a></li><li><a href=#本地开发环境>本地开发环境</a></li></ul></nav></div></details></section><p>我的计算设施中，云服务器和本地设备各占一半，本地设备无公网 IPv4。这样的情况使得我的服务是分地部署、内外网隔离的（但不是做到严格隔离，这部分细节会在外网服务中提到。）</p><p>部署在内网的服务是为了服务自己进行内容的消费或生产。如文件的存取、媒体串流管理和矢量图、排版渲染引擎等。在本地的设备中也有详细分工：群晖的 NAS 部署要用到更多存储的服务。J4125 因为放在自己工作地的住处，则更多用于折腾，方便日常的生活。下面将按大类进行介绍。</p><h2 id=半自动媒体中心>半自动媒体中心</h2><blockquote><p>涉及的自建服务：Emby, Jellyfin, Jackett, Sonarr, Radarr, Chinesesubfinder, Flaresolverr, qBittorrent, Aria2</p></blockquote><p>大多人买 NAS 都会下载收藏电影和电视剧。刚买 918+ 使用的方案是使用群晖 DSM 带的 <a href=https://www.synology.com/en-global/dsm/feature/video_station>Video Station</a>。这个工具的优势是自带基本的内容刮削（新版本需要申请一个 <a href=https://www.themoviedb.org/>The Movie Database</a> 的 API 密钥），能通过官方的 Quick Connect 访问到。首次使用只需添加媒体目录的位置+等待内容索引后，就可以获得网页串流媒体文件的体验。</p><p>但 Video Station 的缺点也很明显：</p><ul><li>刮削的搜索规则比较迷惑，对媒体的文件名要求比较高。如果不做人工干预，索引的媒体信息有许多错误。</li><li>对于额外资源的归档能力较弱，如动漫 ED/OP/OVA 或美剧的幕后，基本都会归档出错。</li><li>支持的媒体格式比较有限，DTS 视频和 EAC3 音频都无法播放（这个问题可以通过安装并配置 ffmpeg 来解决，可以参照这篇<a href=https://wp.gxnas.com/11491.html>博文</a>）</li></ul><p>所以许多人都会使用第三方的媒体管理工具。群晖官方的商店提供了 <a href=https://emby.media/>Emby</a> 和 <a href=https://www.plex.tv/>Plex</a>，第三方还有 <a href=https://github.com/jellyfin/jellyfin>Jellyfin</a>（这三个也都可以 Docker 部署）。这三个工具是被选择较多的媒体管理与串流工具。当初阅读了网上的一些介绍和比对的文章（<a href=https://post.smzdm.com/p/awk8zn62/>1</a>, <a href=https://zhuanlan.zhihu.com/p/370799025>2</a>），最后选择了 <a href=https://emby.media/>Emby</a>，主要是因为界面整洁美观。</p><p>单有媒体库还不够，我参照了 <a href=https://sleele.com/>sleele</a> 的<a href=https://sleele.com/2020/03/16/%e9%ab%98%e9%98%b6%e6%95%99%e7%a8%8b-%e8%bf%bd%e5%89%a7%e5%85%a8%e6%b5%81%e7%a8%8b%e8%87%aa%e5%8a%a8%e5%8c%96/>《追剧全流程自动化》</a> 一文，构建了集媒体资源监控、下载任务创建、媒体内容归档、字幕下载的半自动化追剧工具链。<span class="px-2 py-1 text-gray-700 bg-gray-300 bg-stripes bg-stripes-white dark:text-gray-400 dark:bg-slate-700 dark:bg-stripes-slate-900 rounded-md">这里不对具体搭建的途径进行描述，可以直接参考 sleele 的文章，描述的非常详细。</span>总结来说，工具链的核心是 <a href=https://github.com/Sonarr/Sonarr>Sonarr</a> 和 <a href=https://github.com/Radarr/Radarr>Radarr</a> 这类剧集和电影媒体管理工具。它会爬取媒体的更新信息并定时任务检查缺失媒体，然后使用媒体索引工具 <a href=https://github.com/Jackett/Jackett>Jackett</a> 来获取资源的下载链接，并将链接给到下载器执行下载任务。媒体文件下载后，会移动到指定的位置并按规范统一命名，等待对媒体库的索引。媒体库中的媒体信息，是由媒体库的刮削工具进行的。经过这些步骤，你提前选好的剧集就会第一时间被下载和整理到你的媒体库，等待你的观看了。</p><p><img src=//cdn.ecwuuuuu.com/blog/image/homelab/auto-media.drawio.png-compressed.webp alt="Auto Media Base"></p><p>之所以是“半自动”，是因为自己的网络环境下，负责媒体资源监控的 <a href=https://github.com/Jackett/Jackett>Jackett</a> 部分经常会出现网络相关的错误，导致媒体管理工具 <a href=https://github.com/Sonarr/Sonarr>Sonarr</a>/<a href=https://github.com/Radarr/Radarr>Radarr</a> 无法获取到对应的媒体资源并第一时间创建下载任务（通过 <a href=https://github.com/aria2/aria2>Aria2</a> 和 <a href=https://github.com/qbittorrent/qBittorrent>qBittorrent</a>）。所以目前使用的一个缓解是，在远端的服务器中部署了一个 <a href=https://github.com/FlareSolverr/FlareSolverr>Flaresolverr</a>，用来绕过 Cloudflare 的认证。另外目前也在考虑将 <a href=https://github.com/Jackett/Jackett>Jackett</a> 更换为 <a href=https://github.com/Prowlarr/Prowlarr>Prowlarr</a> 项目（是 <a href=https://github.com/Jackett/Jackett>Jackett</a> 索引管理器的一个替代品，目前处于快速迭代的状态）。半自动中不自动的部分，是 fallback 方案：手动下载媒体并放在预设位置，这样媒体库索引与刮削也能正常的工作，进行媒体的入库。</p><p>这套方案个人使用的还算满意，但是根据用户常看的剧集类型，媒体库做刮削的效果不一定好。比如一些港剧、国产剧，因为默认刮削来源 <a href=https://www.themoviedb.org/>TMDB</a> 缺乏信息，会刮削失败（可以增加豆瓣作为刮削的来源）；<a href=https://github.com/Jackett/Jackett>Jackett</a> 上游失败，也会影响媒体获取的时效，因为 <a href=https://github.com/Sonarr/Sonarr>Sonarr</a> 拿不到媒体的下载链接。自己这套系统中，动漫类资源的获取也可以改进，最近又了解到一个叫 <a href=https://github.com/EstrellaXD/Auto_Bangumi>Auto_Bangumi</a> 的项目，可以做到番剧的整理下载，将来会考虑部署以提升系统体验。</p><h2 id=dsm-以外的文件--多媒体管理>DSM 以外的文件 / 多媒体管理</h2><blockquote><p>涉及的服务：filebrowser, komga, paperless-ngx</p></blockquote><h3 id=在线文件浏览器filebrowser>在线文件浏览器：Filebrowser</h3><p>自己现在是 iOS 设备和 Android 双持，macOS 与 Windows 兼修。再加上之前下定决心不在 macOS 上安装微信。因此想分享一个设备上的图片或文件，可能需要中转好几个设备和服务。</p><blockquote><p>macOS 要分享一个文件到微信里：macOS 上通过 OneDrive 传输到云端，安卓手机上用客户端下载下来，最后发送到微信里。（林檎牌设备可以使用 AirDrop，但曾经我还没拥有 iOS 手机）</p></blockquote><p>基于这样的需求：内网传输文件、所有设备都可以访问。就开始考虑部署一个网页的文件浏览器。</p><p>以前自己玩云主机的时候，部署过 NextCloud (OwnCloud)。<a href=https://nextcloud.com/>NextCloud</a> 功能丰富，撑得起团队办公的需求（安装插件可以处理多种文件格式，支持协作办公）。但在内网的场景，完全没必要部署这么“重”的方案（反正只允许内网访问，甚至不需求鉴权）。所以最后选择的是用 Go 写的文件浏览器，<a href=https://github.com/filebrowser/filebrowser>filebrowser</a>。部署其 Docker 镜像，将目录映射到指定地点，就可以在 Web UI 进行文件的增删改查。支持多用户、运行脚本对文件进行操作、控制用户访问的目录范围等。</p><blockquote><p>2024.11 Update</p><p>我现在补充了 Alist 来进行文件管理，Alist 支持多云存储（比如将 OneDrive，阿里云盘挂载），但我只是用它来管理文件，不使用它的云存储功能。你可以通过官方的仓库来了解 <a href=https://github.com/AlistGo/alist>Alist</a>。</p></blockquote><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/filebrowser.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Filebrowser</strong></figcaption></figure><h3 id=漫画阅读器komga>漫画阅读器：Komga</h3><p>自己不怎么看漫画，但还是有喜欢的作品<span class="px-2 py-1 text-gray-700 bg-gray-300 bg-stripes bg-stripes-white dark:text-gray-400 dark:bg-slate-700 dark:bg-stripes-slate-900 rounded-md">(《BLEACH》，《排球少年》)</span>并收藏了电子化的漫画。这些大量图片的形式浏览不方便。所以想部署一个在线的漫画阅读器。一开始调研时，会发现电子书的阅读平台有很多，但是都不适合直接用于整理多图片的漫画。针对漫画有优化的工具有 Ubooquity，Komga，Kavita，Comixed。</p><p>最后选择了 Komga，因为 GitHub 上 Star 比较多，界面也比较的简洁。</p><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/komga-interface.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Komga</strong></figcaption></figure><h3 id=文档数字化管理paperless-ngx>文档数字化管理：Paperless-NGX</h3><p>这个服务其实我也没有硬需求，只是想了解下就部署了（部署后，使用率也比较低）。之所以叫这个名字是因为最初的项目是 <a href=https://github.com/the-paperless-project/paperless>Paperless</a>，原作者疲于维护，开源社区 Fork 出了一个新版本 <a href=https://github.com/jonaswinkler/paperless-ng>Paperless-ng</a>，然后又因为缺少维护，有了现在最新的这个叉出 <a href=https://github.com/paperless-ngx/paperless-ngx>Paperless-ngx</a>。</p><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/paperless-ngx.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Paperless-ngx</strong></figcaption></figure><p>Paperless-ngx 的介绍是 scan, index and archive all your physical documents。也反映了他的用途：整理、电子化你的实体文件的。将你所有的实体文件扫描后导入，paperless-ngx 会进行 OCR 识别内容，配合你可以人工进行打标签、评论。整理好的文件再未来就可以很方便的进行检索查询。</p><p>Paperless-ngx 里的文档还有 Archive serial number 的概念，这在你需要保留原件时，可以生成 ASN 并标记到实体文件上，未来有整理实体文件额需求也会很方便。</p><p>如果你有大量的纸质文档并且想电子化，可以考虑部署一个使用。</p><h2 id=容器管理和系统状态监控>容器管理和系统状态监控</h2><blockquote><p>涉及的服务：portainer, liberspeed, homarr, dashdot</p></blockquote><h3 id=容器管理portainer>容器管理：Portainer</h3><p>我这套 Homelab 的服务，绝大多数都是使用 Docker 进行部署的。<a href=https://github.com/portainer/portainer>Portainer</a> 就提供了一个 Web UI 可以对 Docker 环境进行简单的管理（也支持 Docker Swarm 集群，Kubernetes 集群）。创建容器可以直接在 Web UI 里以填表的形式，选择镜像、添加环境变量和绑定存储。也支持在页面上直接应用一个 Docker-compose yaml 文件。拉起一个多个容器的栈（Stack）。部署了 Portainer 就不需要打命令，直接点击就可以操作容器或者调整配置。</p><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/portainer-ui.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Portainer</strong></figcaption></figure><h3 id=测速服务端liberspeed>测速服务端：Liberspeed</h3><p>Speedtest 的社区开源版本，部署来是用来测试内网链路的速度的。<a href=https://github.com/librespeed/speedtest>Liberspeed</a> 并不是只用来内网测速，现在也有在线的测速网站在用这套方案。</p><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/liberspeed-ui.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Liberspeed </strong>看着像个简陋的 SpeedTest，但是该有的信息都有</figcaption></figure><p>使用了这个工具会发现，有线千兆内网其实跑不到 1000M 的速度、也能看看无线设备能到多少速度。</p><h3 id=服务门户homarr>服务门户：Homarr</h3><p>部署的服务太多，会记不住服务的访问入口（无论是域名还是端口）。这时候就可以部署一个内网门户。在这个系列中，在外网服务中我介绍了 Authentik，他的应用列表可以作为服务的门户。也介绍了 Flame，可以添加应用的列表和书签列表。但是内网中，我选择的是 Homarr。</p><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/homarr-ui.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Homarr </strong>为你的服务提供一个统一美观的导航栏</figcaption></figure><p><a href=https://github.com/ajnart/homarr>Homarr</a> 没有鉴权，直接按组把服务的卡片显示在页面中。你不需要下载应用的图标，主流的服务它可以依赖 <a href=https://github.com/walkxcode/dashboard-icons>walkxcode / Dashboard-Icons</a> 获取到图标。它除了加入服务的卡片，还支持容器、日历、搜索、Torrent、天气等模块，可以绑定下载软件、媒体库、系统状态等信息显示在页面中。</p><p>这种设计就非常适合内网 Homelab 的环境：不鉴权，卡片方便访问各种服务，将自己软件、硬件的状态显示在页面上。</p><h3 id=系统实时信息dashdot>系统实时信息：DashDot</h3><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/dashdot-ui.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Dashdot.</strong></figcaption></figure><p><a href=https://github.com/MauriceNino/dashdot>Dashdot</a> 是一个显示服务器状态的面板，提供的信息包括系统、处理器负载、存储、内存和网络。比较美观，能与 Homarr 组合作为组件显示。</p><h2 id=排版渲染矢量图绘图>排版渲染、矢量图绘图</h2><blockquote><p>涉及的服务：overleaf, drawio</p></blockquote><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/selfhost-drawio-ui.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Draw.IO</strong></figcaption></figure><h2 id=家庭体验提升>家庭体验提升</h2><blockquote><p>涉及的服务：pihole, home-assistant</p></blockquote><p>暂不介绍，未来可能会在介绍只能个人智能家居方案时再提。</p><h2 id=本地开发环境>本地开发环境</h2><blockquote><p>涉及的服务：Coder</p></blockquote><figure class=w-full><img src=//cdn.ecwuuuuu.com/blog/image/homelab/coder-ui.png-compressed.webp alt=alt class=rounded-lg><figcaption><strong>Coder with code-server (a open source vs code implementation) template</strong></figcaption></figure></article></main><div class="pb-10 w-content"><div class="bg-white dark:bg-gray-900 drop-shadow-lg overflow-hidden sm:rounded-lg"><div class="px-4 py-5 sm:px-6"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-gray-200"><a id=article-info-card></a>Article Card</h3><p class="mt-1 text-sm text-gray-500">For "<span class=italic>Homelab：我的赛博积木 - 内网服务</span>"</p></div><div class="border-t border-gray-200 dark:border-gray-700"><dl><table class="border-collapse table-fixed w-full"><tbody class="bg-white dark:bg-gray-800"><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Author</td><td class="border-b font-bold border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm">Zhenghao Wu</td></tr><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Publish & Update Date</td><td class="font-bold border-b border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm">2022-10-15 - <abbr title="Date of last major modification to this page">2022-12-28</abbr></td></tr><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Tags</td><td class="font-bold border-b border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm"><a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/homelab>Homelab</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/docker>Docker</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/container>Container</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/images>Images</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/service>Service</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/self-host>Self-host</a></td></tr></tbody></table></div></div></div><div class="pb-10 w-content"><script src=https://giscus.app/client.js data-repo=ecwu/ecwu.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQzMzE1NjY=" data-category="Blog Post Discussion" data-category-id=DIC_kwDOCcuALs4CObNl data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=botton data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div><section class=mb-10><hr><h2 class="text-gray-900 dark:text-gray-200">Related Posts</h2><ul class="list-disc list-inside text-gray-900 dark:text-gray-200"><li><a href=https://ecwuuuuu.com/post/homelab-journey-internet/>Homelab：我的赛博积木 - 公网服务</a></li><li><a href=https://ecwuuuuu.com/post/authentik-tutorial-5-setup-migration/>Authentik 教程系列：服务的迁移</a></li><li><a href=https://ecwuuuuu.com/post/authentik-tutorial-4-setup-forwardauth/>Authentik 教程系列：通过反向代理和 ForwardAuth 接入任何应用</a></li></ul></section><div><footer class="relative mb-6 text-gray-900 dark:text-gray-200"><hr class=pb-5><div class="flex justify-begin w-full mx-auto mb-2"><ul class="flex flex-row justify-begin text-lg space-x-2"><li><a href=https://ecwuuuuu.com/index.xml aria-label=RSS class="round-button social-button"><svg width="16" height="16" fill="currentColor" class="w-5 h-5 fill-gray-700 hover:fill-gray-900 dark:fill-gray-400 dark:hover:fill-gray-200" viewBox="0 0 16 16"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2zm0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2zm.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3z"/></svg></a></li></ul></div><p>Powered by <a href=https://gohugo.io>Hugo</a> and <a href=https://github.com/ecwu/ecwu-theme>ecwu-theme</a>.
Build by GitHub Actions at: 2025-10-28 19:37 CST.</p><p>&copy;2025
ECWUUUUU.
All rights reserved.</p><p><a href=http://beian.miit.gov.cn/>粤 ICP 备 17015575 号 - 1</a></p><p class="text-sm my-4">Google Analytics enabled | <a href=https://ecwuuuuu.com/page/changelog>site changelog</a></p></footer></div></body></html>