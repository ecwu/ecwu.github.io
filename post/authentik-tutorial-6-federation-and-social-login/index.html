<!doctype html><html lang=en><head><link rel=icon type=image/x-icon href=https://ecwuuuuu.com/favicon.ico><link rel=stylesheet href=https://ecwuuuuu.com/css/style.min.9ab4393671eb283773458ed7fdf9774e999c0bf70b25501377a343f3e9e1f239.css integrity="sha256-mrQ5NnHrKDdzRY7X/fl3TpmcC/cLJVATd6ND8+nh8jk="><meta charset=utf-8><title>Authentik 教程系列：社交登录 - ECWU's Notebook</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Homepage and blog for Zhenghao Wu (ECWU), sharing thoughts on technology, everyday experiences, and photography. Engaging with the community through knowledge sharing."><meta name=keywords content="Homelab,Docker,Container,Images,Service,Self-host,Authentication,SAML,OIDC,OpenID Connect"><meta name=author content="ECWUUUUU"><script>(function(){const e=localStorage.getItem("current-theme");e===null?window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("current-theme","dark"),document.documentElement.classList.add("dark")):(localStorage.setItem("current-theme","light"),document.documentElement.classList.remove("dark")):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})(),window.updateMermaidTheme=()=>{if(typeof mermaid!="undefined"){const e=document.documentElement.classList.contains("dark"),t=document.querySelectorAll("pre.mermaid");t.forEach(e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)}),e?(initMermaidDark(),mermaid.run()):(initMermaidLight(),mermaid.run())}};function change_color_mode(){localStorage.getItem("current-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("current-theme","dark"),change_discussion_color_mode(),updateMermaidTheme()):(document.documentElement.classList.remove("dark"),localStorage.setItem("current-theme","light"),change_discussion_color_mode(),updateMermaidTheme())}function change_discussion_color_mode(){const t=localStorage.getItem("current-theme")==="light"?"light":"dark",n={setConfig:{theme:t}},e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:n},"https://giscus.app")}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("header-theme-button").addEventListener("click",change_color_mode)})</script><link rel=icon type=image/x-icon href=https://ecwuuuuu.com/favicon.ico><link rel=stylesheet href=https://ecwuuuuu.com/css/style.min.9ab4393671eb283773458ed7fdf9774e999c0bf70b25501377a343f3e9e1f239.css integrity="sha256-mrQ5NnHrKDdzRY7X/fl3TpmcC/cLJVATd6ND8+nh8jk="><meta charset=utf-8><title>Authentik 教程系列：社交登录 - ECWU's Notebook</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Homepage and blog for Zhenghao Wu (ECWU), sharing thoughts on technology, everyday experiences, and photography. Engaging with the community through knowledge sharing."><meta name=keywords content="Homelab,Docker,Container,Images,Service,Self-host,Authentication,SAML,OIDC,OpenID Connect"><meta name=author content="ECWUUUUU"><script>(function(){const e=localStorage.getItem("current-theme");e===null?window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("current-theme","dark"),document.documentElement.classList.add("dark")):(localStorage.setItem("current-theme","light"),document.documentElement.classList.remove("dark")):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})(),window.updateMermaidTheme=()=>{if(typeof mermaid!="undefined"){const e=document.documentElement.classList.contains("dark"),t=document.querySelectorAll("pre.mermaid");t.forEach(e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)}),e?(initMermaidDark(),mermaid.run()):(initMermaidLight(),mermaid.run())}};function change_color_mode(){localStorage.getItem("current-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("current-theme","dark"),change_discussion_color_mode(),updateMermaidTheme()):(document.documentElement.classList.remove("dark"),localStorage.setItem("current-theme","light"),change_discussion_color_mode(),updateMermaidTheme())}function change_discussion_color_mode(){const t=localStorage.getItem("current-theme")==="light"?"light":"dark",n={setConfig:{theme:t}},e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:n},"https://giscus.app")}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("header-theme-button").addEventListener("click",change_color_mode)})</script></head><body class="transition-colors duration-300"><div class=pt-6><div class="nav-title flex flex-row flex-wrap gap-2"><a href=https://ecwuuuuu.com/><svg class="w-36 fill-gray-900 dark:fill-gray-200" fill="currentColor" viewBox="0 0 204.24 43.44"><path d="M0 43.08V.36h18.24v5.76H6.12v12.54h10.56v5.76H6.12v12.54h12.12v6.12H0z"/><path d="M41.64 30.9v2.64c0 1.32-.25 2.57-.75 3.75s-1.19 2.23-2.07 3.15-1.91 1.65-3.09 2.19-2.45.81-3.81.81c-1.16.0-2.34-.16-3.54-.48s-2.28-.88-3.24-1.68-1.75-1.83-2.37-3.09c-.62-1.26-.93-2.87-.93-4.83V9.84c0-1.4.24-2.7.72-3.9s1.16-2.24 2.04-3.12 1.93-1.57 3.15-2.07C28.97.25 30.32.0 31.8.0c2.88.0 5.22.94 7.02 2.82.88.92 1.57 2.01 2.07 3.27s.75 2.63.75 4.11v2.4h-6.12v-2.04c0-1.2-.34-2.24-1.02-3.12s-1.6-1.32-2.76-1.32c-1.52.0-2.53.47-3.03 1.41s-.75 2.13-.75 3.57v21.84c0 1.24.27 2.28.81 3.12s1.51 1.26 2.91 1.26c.4.0.83-.07 1.29-.21s.89-.37 1.29-.69c.36-.32.66-.76.9-1.32s.36-1.26.36-2.1v-2.1h6.12z"/><path d="M78.36.36 72 43.08h-5.76l-4.68-27.72h-.12l-4.62 27.72h-5.76L44.7.36h6.48l3.06 27.12h.12l4.8-27.12h4.68l4.98 27.78h.12l2.94-27.78H78.36z"/><path d="M102 .36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16-2.48.78-3.84.78-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36H102z"/><path d="M127.56.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16-2.48.78-3.84.78-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36h6.12z"/><path d="M153.12.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08S147 34.4 147 32.88V.36h6.12z"/><path d="M178.68.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36H165v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08c1.08.0 1.98-.36 2.7-1.08s1.08-1.84 1.08-3.36V.36h6.12z"/><path d="M204.24.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36h6.12z"/></svg><p class=sr-only>ECWU Homepage</p></a></div><nav aria-label=navbar class="mb-3 mr-8"><ol role=list class="flex flex-wrap"><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200 flex items-center gap-1'>Home
</a><svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/post/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200 flex items-center gap-1'>Posts
</a><svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/photography/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200 flex items-center gap-1'>Photos
</a><svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/series/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200 flex items-center gap-1'>Series
</a><svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/page/about/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200 flex items-center gap-1'>About
</a><svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/page/friends/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200 flex items-center gap-1'>Friends
</a><svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://www.travellings.cn/go.html class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200 flex items-center gap-1'>Travelling
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link-icon lucide-external-link inline-block"><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/></svg></a></div></li></ol></nav><div class="flex items-center space-x-2"><div class="w-6 h-6 inline-flex items-center justify-center rounded-lg bg-white dark:bg-black shadow-inner ring-1 ring-black/5"><i id=header-theme-button data-feather=sun class="site-header-navlink rounded cursor-pointer"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-icon lucide-sun h-4 w-4 block dark:hidden fill-gray-900 dark:fill-gray-200"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-icon lucide-moon h-4 w-4 hidden dark:block fill-gray-900 dark:fill-gray-200"><path d="M20.985 12.486a9 9 0 11-9.473-9.472c.405-.022.617.46.402.803a6 6 0 008.268 8.268c.344-.215.825-.004.803.401"/></svg></i></div><span class="dark:hidden text-sm">To Dark Mode</span>
<span class="hidden dark:block dark:text-gray-200 text-sm">To Light Mode</span></div></div><figure class="ml-[-12.5vw] mt-12 mb-12 h-96 w-screen relative overflow-hidden"><img class="object-cover object-center w-full h-96" src="https://unsplash.com/photos/r8evD-sX5Mc/download?ixid=M3wxMjA3fDB8MXxhbGx8fHx8fHx8fHwxNzY2MjY5MzM4fA&amp;force=true&amp;w=2400" alt="Featured Images"><figcaption class="text-sm absolute bottom-0 right-0 pr-5 bg-gray-900 text-gray-500 px-2">Photo by Zulfugar Karimov on Unsplash</figcaption></figure><div class="mb-12 mt-16 w-content"><h1 class="text-gray-900 dark:text-gray-200">Authentik 教程系列：社交登录</h1><div class="text-gray-700 dark:text-gray-400"><div class=space-y-1><p><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-signature-icon lucide-signature h-5 w-5 inline-block"><path d="m21 17-2.156-1.868A.5.5.0 0018 15.5v.5a1 1 0 01-1 1h-2a1 1 0 01-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 000 5c4.153.0 4.745-11.295 5.708-13.5a2.5 2.5.0 113.31 3.284"/><path d="M3 21h18"/></svg> Zhenghao Wu</p><p><span class=mr-2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-clock-icon lucide-calendar-clock h-5 w-5 inline-block"><path d="M16 14v2.2l1.6 1"/><path d="M16 2v4"/><path d="M21 7.5V6a2 2 0 00-2-2H5A2 2 0 003 6v14a2 2 0 002 2h3.5"/><path d="M3 10h5"/><path d="M8 2v4"/><circle cx="16" cy="16" r="6"/></svg> Sunday, December 21, 2025
</span><span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-clock-icon lucide-clipboard-clock h-5 w-5 inline-block"><path d="M16 14v2.2l1.6 1"/><path d="M16 4h2a2 2 0 012 2v.832"/><path d="M8 4H6A2 2 0 004 6v14a2 2 0 002 2h2"/><circle cx="16" cy="16" r="6"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg> 5 min read</span></p><p><span class=mr-2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flag-icon lucide-flag h-5 w-5 inline-block"><path d="M4 22V4a1 1 0 01.4-.8A6 6 0 018 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0120 4v10a1 1 0 01-.4.8A6 6 0 0116 16c-3 0-5-2-8-2a6 6 0 00-4 1.528"/></svg>
Status: Finished
</span><span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-badge-check-icon lucide-badge-check h-5 w-5 inline-block"><path d="M3.85 8.62a4 4 0 014.78-4.77 4 4 0 016.74.0 4 4 0 014.78 4.78 4 4 0 010 6.74 4 4 0 01-4.77 4.78 4 4 0 01-6.75.0 4 4 0 01-4.78-4.77 4 4 0 010-6.76z"/><path d="m9 12 2 2 4-4"/></svg>
Confidence: likely</span></p><p><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-scroll-text-icon lucide-scroll-text h-5 w-5 inline-block"><path d="M15 12h-5"/><path d="M15 8h-5"/><path d="M19 17V5a2 2 0 00-2-2H4"/><path d="M8 21h12a2 2 0 002-2v-1a1 1 0 00-1-1H11a1 1 0 00-1 1v1a2 2 0 11-4 0V5A2 2 0 102 5v2a1 1 0 001 1h3"/></svg> <a href=#article-info-card>Post Details</a></p></div></div></div><div class="w-content bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-400 px-5 py-3"><p>This post is part 7 of 7 in the <b>Authentik</b> series.</p><details class=mt-3><summary class="cursor-pointer hover:text-gray-900 dark:hover:text-gray-200 font-medium">View all articles in this series</summary><ol class="mt-2 ml-8 space-y-1"><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/authentik-tutorial-1-introduction-and-install/ class=hover:underline>Authentik 教程系列：简介和安装配置</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/authentik-tutorial-2-setup-reverse-proxy/ class=hover:underline>Authentik 教程系列：反向代理的配置</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/authentik-tutorial-3-setup-oidc-saml-ldap/ class=hover:underline>Authentik 教程系列：将应用通过 OIDC，SAML，LDAP 协议接入</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/authentik-tutorial-4-setup-forwardauth/ class=hover:underline>Authentik 教程系列：通过反向代理和 ForwardAuth 接入任何应用</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/authentik-tutorial-video/ class=hover:underline>Authentik 视频教程 - 合集</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/authentik-tutorial-5-setup-migration/ class=hover:underline>Authentik 教程系列：服务的迁移</a></li><li class="list-decimal ml-4"><span class="font-bold text-gray-900 dark:text-gray-100">Authentik 教程系列：社交登录</span> <span class=text-sm>(current)</span></li></ol></details></div><main><article class="prose dark:prose-invert lg:prose-xl md:prose-lg prose-ul:leading-5 prose-ol:leading-5"><section class=mb-8><details closed class=toc><summary>Table of Contents</summary><div class=text-sm><nav id=TableOfContents><ul><li><a href=#概念解释>概念解释</a></li><li><a href=#github-社交登录配置>GitHub 社交登录配置</a><ul><li><a href=#创建-oauth-应用>创建 OAuth 应用</a></li><li><a href=#在-authentik-中配置-github-source>在 Authentik 中配置 GitHub Source</a></li><li><a href=#配置-flow-流程>配置 Flow 流程</a></li></ul></li><li><a href=#飞书社交登录配置>飞书社交登录配置</a><ul><li><a href=#创建飞书应用>创建飞书应用</a></li><li><a href=#在-authentik-中配置飞书-source>在 Authentik 中配置飞书 Source</a></li><li><a href=#配置-flow-流程-1>配置 Flow 流程</a></li></ul></li><li><a href=#参考资料>参考资料</a></li></ul></nav></div></details></section><p>今天我们来讲讲<strong>社交登录</strong>（Social Login），也就是允许用户使用第三方账号（如 Google、GitHub、Facebook 等）登录到我们的 Authentik 系统中。随着教程的深入，要实现这些功能不再有简便的系统预设/流程可用，会涉及：
<strong>Source 的概念，Flow 流程的详细配置，以及 Policy 策略的使用。</strong></p><p>之前我们都在使用 Authentik 来当各种服务的身份提供者（Identity Provider, IdP），但有时我们也希望 Authentik 能够作为一个<strong>服务提供者</strong>（Service Provider, SP），允许用户通过其他身份提供者登录。这就是社交登录的核心概念。</p><p>这些身份提供者被称为 Source (来源)，Authentik 通实现了多种协议，包括 OAuth2、OIDC 和 SAML。今天我们主要演示两个基于 OAuth 协议的提供者：GitHub 和飞书（Lark）。其中 GitHub 是官方支持的一种类型，而飞书则是通过自定义 OpenID OAuth Source 实现的。</p><h2 id=概念解释>概念解释</h2><p><figure><img class="my-0 rounded-md" loading=lazy decoding=async fetchpriority=low alt="Authentik 社交登录示意图" src=https://cdn.ecwuuuuu.com/blog/image/authentik-social-login-figure.png-compressed.webp></figure></p><p>传统的流程，Authentik 依赖内部的用户数据库（Built-in Source）来验证用户身份，作为 IdP 向各种应用提供认证服务（其他服务为服务提供商 SP）。而社交登录则是 Authentik 作为 SP，依赖外部的身份提供者（Source）作为 IdP来提供用户身份。</p><p>但这个过程，Authentik 并不是获取信息后转发到下游应用，而是将用户信息同步到 Authentik 的用户数据库中，通过 Enrollment 的流程将用户创建到 Authentik 系统中，然后用户就可以使用这些账号登录到 Authentik 绑定的各种应用中。</p><h2 id=github-社交登录配置>GitHub 社交登录配置</h2><h3 id=创建-oauth-应用>创建 OAuth 应用</h3><p>首先，我们需要创建一个 GitHub OAuth 应用，进入 GitHub 的开发者设置页面，Developer settings -> OAuth Apps -> <a href=https://github.com/settings/applications/new>New OAuth App</a>。</p><p>填写应用信息：</p><ul><li>Application name: ECWU SSO</li><li>Homepage URL: <code>https://auth.yourdomain.com</code> （替换为你的 Authentik 域名，但这个不是特别重要）</li><li>Description: 可以不填</li><li>Authorization callback URL: <code>https://authentik.company/source/oauth/callback/github</code> （替换为你的 Authentik 域名）</li></ul><p>创建应用后，记下 Client ID 和 Client Secret（应用创建好后，Secret 需要新建）。</p><h3 id=在-authentik-中配置-github-source>在 Authentik 中配置 GitHub Source</h3><p>在 Authentik 管理界面，导航到 Directory -> Federation and Social login -> Create。</p><p>弹出的模态窗口中：</p><ul><li>Select Type 选择 GitHub OAuth Source。</li><li>第二页的信息中：<ul><li>Name: Github OAuth (可自定义)</li><li>Slug: github (确保信息和大小写一致)</li><li>Protocol settings:<ul><li>Client ID: 填入刚才 GitHub 应用的 Client ID</li><li>Client Secret: 填入刚才 GitHub 应用的 Client Secret</li></ul></li></ul></li></ul><p>保存后，我们就创建好了一个 GitHub OAuth Source。</p><h3 id=配置-flow-流程>配置 Flow 流程</h3><p>接下来，我们需要配置一个 Flow 流程来使用这个 Source。效果是用户在登录窗有一个 GitHub 登录按钮（图标），点击后跳转到 GitHub 授权页面。</p><p>在 Authentik 管理界面，导航到 Flows and Stages -> Flows，选择 default-authentication-flow 进行编辑。<label for=sidenote-0 class=sidenote-number></label>
<input type=checkbox id=sidenote-0 class=sidenote-checkbox>
<span class=sidenote>这里要编辑的是系统绑定的默认认证流程，如果你有自定义的认证流程，可以选择编辑你自己的流程。检查系统具体使用的流程，可以在管理界面 -> System -> Brands -> authentik-default -> Default Flow -> Authentication Flow 查看。</span></p><p>在 Flow 编辑页面，点击 Stage Bindings 选项卡，找到 default-authentication-identification 阶段，点击 Edit Stages。下拉找到 Source Settings，能在 Available Sources 中看到我们刚才创建的 GitHub OAuth Source，选中它添加到 Selected Sources 列表中，保存。(下面还有个Show sources&rsquo; labels选项，可以勾选以显示文本标签)</p><p>然后我们还需要修改 default-source-enrollment Flows，在 Stage Bindings 选项卡中，找到 default-source-enrollment-write 阶段，找到 User Type。这里有三个选项：</p><ul><li>Internal：内部用户，可以登录到 Authentik 系统，自行管理账号（改密码，撤回对某个应用的授权等）。</li><li>External：外部用户，只能登录到 Authentik 系统绑定的应用，不能登录到 Authentik 系统本身。</li><li>Service account：服务账号，通常用于机器对机器的认证。</li></ul><p><strong>这个 Flow 默认是选择 External，我们需要改成 Internal，否则用户登录后无法进入 Authentik 系统。（如果你希望用户只能登录到绑定的应用，而不能登录到 Authentik 系统本身，可以保持 External 不变。）</strong></p><p>保存后，我们就完成了 GitHub 社交登录的配置。现在用户在登录页面应该能看到 GitHub 的登录按钮，点击后会跳转到 GitHub 授权页面，授权后即可登录到 Authentik 系统。</p><h2 id=飞书社交登录配置>飞书社交登录配置</h2><p>第二个例子是飞书，Authentik 官方并没有直接支持飞书的 Source 类型（虽然有人提交了一个 PR），所以我们需要通过自定义 OpenID OAuth Source 来实现。而且飞书的 OAuth 实现有些特殊，需要注意一些配置细节。</p><div class="flex px-4 py-3 rounded-md bg-gray-100 dark:bg-slate-800"><span class="text-primary-400 pe-3 flex items-start mt-0.5"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pen-line-icon lucide-pen-line"><path d="M13 21h8"/><path d="M21.174 6.812a1 1 0 00-3.986-3.987L3.842 16.174a2 2 0 00-.5.83l-1.321 4.352a.5.5.0 00.623.622l4.353-1.32a2 2 0 00.83-.497z"/></svg>
</span><span class=dark:text-neutral-300><div>我们这里演示的是飞书国内版（feishu.cn），如果你使用的是国际版（lark.com），域名和 URL 有所不同，但我没有测试过国际版，具体配置请参考飞书的官方文档。</div></span></div><h3 id=创建飞书应用>创建飞书应用</h3><p>首先，我们需要在飞书开放平台创建一个应用，进入 <a href=https://open.feishu.cn/>飞书开放平台</a>。登录后进入控制台，创建一个新应用（按要求名字和描述等信息）。</p><p>在应用创建好后，进入应用的开发配置 -> 权限管理，添加以下权限（搜索添加）：</p><ul><li>获取用户邮箱信息 <code>contact:user.email:readonly</code></li><li>获取用户 user ID <code>contact:user.employee_id:readonly</code></li></ul><p>然后在基础信息 -> 凭证与基础信息 中，记下 App ID 和 App Secret。</p><p>我们还需要配置<code>重定向 URL</code>：位置在开发配置 -> 安全设置，添加重定向 URL。需要注意的是，这个 URL 在 Authentik 创建好 Source 后能看到，格式是 <code>http://authentik.company/source/oauth/callback/{slug}/</code>，其中 <code>{slug}</code> 是你在 Authentik 创建 Source 时填写的 Slug。比如我们后面创建的 Source Slug 是 <code>feishu</code>，那么重定向 URL 就是 <code>http://authentik.company/source/oauth/callback/feishu/</code>。</p><p>创建好之后，记得去发布应用，让它生效。</p><h3 id=在-authentik-中配置飞书-source>在 Authentik 中配置飞书 Source</h3><blockquote><p>配置参考了 fangpsh&rsquo;s blog 的一篇文章，链接在参考资料部分。</p></blockquote><p>在 Authentik 管理界面，导航到 Directory -> Federation and Social login -> Create。
弹出的模态窗口中：</p><ul><li>Select Type 选择 OpenID OAuth Source。</li><li>第二页的信息中：<ul><li>Name: Feishu OAuth (可自定义)</li><li>Slug: feishu (确保信息和大小写一致)</li><li>Protocol settings:<ul><li>Client ID: 填入刚才飞书应用的 App ID</li><li>Client Secret: 填入刚才飞书应用的 App Secret</li><li>Scopes: 填入 <code>* contact:user.email:readonly contact:user.employee_id:readonly</code>（最前面的 * 代表覆盖默认作用域）</li></ul></li><li>URL settings:<ul><li>Authorization URL: <code>https://accounts.feishu.cn/open-apis/authen/v1/authorize</code></li><li>Access token URL: <code>https://open.feishu.cn/open-apis/authen/v2/oauth/token</code></li><li>Profile URL: <code>https://passport.feishu.cn/suite/passport/oauth/userinfo</code></li></ul></li></ul></li></ul><p>保存后，我们就创建好了一个飞书 OAuth Source。</p><h3 id=配置-flow-流程-1>配置 Flow 流程</h3><p>这部分和 GitHub 的配置类似，我们需要在 default-authentication-flow 中添加飞书 Source。具体步骤是一样的，这里不再赘述。</p><h2 id=参考资料>参考资料</h2><ul><li><a href=https://docs.goauthentik.io/users-sources/sources/social-logins/github/>https://docs.goauthentik.io/users-sources/sources/social-logins/github/</a> （GitHub Source 官方教程）</li><li><a href=https://fangpsh.github.io/posts/2025/2025-07-24.html>https://fangpsh.github.io/posts/2025/2025-07-24.html</a> （飞书 OAuth2 配置参考，里面提供了几个关键的 URL）</li><li><a href=https://github.com/goauthentik/authentik/issues/8592>https://github.com/goauthentik/authentik/issues/8592</a> （一些关于 GitHub Source 的讨论）</li><li><a href=https://github.com/goauthentik/authentik/pull/13773>https://github.com/goauthentik/authentik/pull/13773</a> （飞书 Source PR）</li><li><a href=https://github.com/goauthentik/authentik/pull/18086>https://github.com/goauthentik/authentik/pull/18086</a> （微信 Source PR，已经合并到主线，预计很快能发布）</li></ul></article></main><div class="pb-10 w-content"><div class="bg-white dark:bg-gray-900 drop-shadow-lg overflow-hidden sm:rounded-lg"><div class="px-4 py-5 sm:px-6"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-gray-200"><a id=article-info-card></a>Article Card</h3><p class="mt-1 text-sm text-gray-500">For "<span class=italic>Authentik 教程系列：社交登录</span>"</p></div><div class="border-t border-gray-200 dark:border-gray-700"><dl><table class="border-collapse table-fixed w-full"><tbody class="bg-white dark:bg-gray-800"><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Author</td><td class="border-b font-bold border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm">Zhenghao Wu</td></tr><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Publish & Update Date</td><td class="font-bold border-b border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm">2025-12-21 - <abbr title="Date of last major modification to this page">2025-12-22</abbr></td></tr><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Tags</td><td class="font-bold border-b border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm"><a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/homelab>Homelab</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/docker>Docker</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/container>Container</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/images>Images</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/service>Service</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/self-host>Self-host</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/authentication>Authentication</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/saml>SAML</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/oidc>OIDC</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/openid-connect>OpenID Connect</a></td></tr></tbody></table></div></div></div><div class="pb-10 w-content"><script src=https://giscus.app/client.js data-repo=ecwu/ecwu.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQzMzE1NjY=" data-category="Blog Post Discussion" data-category-id=DIC_kwDOCcuALs4CObNl data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=botton data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div><section class=mb-10><hr><h2 class="text-gray-900 dark:text-gray-200">Related Posts</h2><ul class="list-disc list-inside text-gray-900 dark:text-gray-200"><li><a href=https://ecwuuuuu.com/post/authentik-tutorial-5-setup-migration/>Authentik 教程系列：服务的迁移</a></li><li><a href=https://ecwuuuuu.com/post/authentik-tutorial-4-setup-forwardauth/>Authentik 教程系列：通过反向代理和 ForwardAuth 接入任何应用</a></li><li><a href=https://ecwuuuuu.com/post/authentik-tutorial-3-setup-oidc-saml-ldap/>Authentik 教程系列：将应用通过 OIDC，SAML，LDAP 协议接入</a></li></ul></section><div><footer class="relative mb-6 text-gray-900 dark:text-gray-200"><hr class=pb-5><div class="flex justify-begin w-full mx-auto mb-2"><ul class="flex flex-row justify-begin text-lg space-x-2"><li><a href=https://ecwuuuuu.com/index.xml aria-label=RSS class="round-button social-button"><svg width="16" height="16" fill="currentColor" class="w-5 h-5 fill-gray-700 hover:fill-gray-900 dark:fill-gray-400 dark:hover:fill-gray-200" viewBox="0 0 16 16"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2zm0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2zm.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3z"/></svg></a></li></ul></div><p>Powered by <a href=https://gohugo.io>Hugo</a> and <a href=https://github.com/ecwu/ecwu-theme>ecwu-theme</a>.
Build by GitHub Actions at: 2026-01-09 18:54 CST.</p><p>&copy;2026
ECWUUUUU.
All rights reserved.</p><p><a href=http://beian.miit.gov.cn/>粤 ICP 备 17015575 号 - 1</a></p><p class="text-sm my-4">Google Analytics enabled | <a href=https://ecwuuuuu.com/page/changelog>site changelog</a></p></footer></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-HSPDSQWH5L"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HSPDSQWH5L")}</script></body></html>