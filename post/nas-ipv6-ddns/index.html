<!doctype html><html lang=en><head><link rel=icon type=image/x-icon href=https://ecwuuuuu.com/favicon.ico><link rel=stylesheet href=https://ecwuuuuu.com/css/style.min.a2ef72f171e482439bc85467bc32279e915ed41b49ed4103fa249e4eeb7a5f3c.css integrity="sha256-ou9y8XHkgkObyFRnvDInnpFe1BtJ7UED+iSeTut6Xzw="><meta charset=utf-8><title>Making Synology NAS accessible from the Internet using IPv6 and DDNS - ECWU's Notebook</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Homepage and blog for Zhenghao Wu (ECWU), sharing thoughts on technology, everyday experiences, and photography. Engaging with the community through knowledge sharing."><meta name=keywords content="NAS,Synology,DS918+,DDNS,Networking,Cloudflare,Domain,HTTPS"><meta name=author content="ECWUUUUU"><script>(function(){const e=localStorage.getItem("current-theme");e===null?window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("current-theme","dark"),document.documentElement.classList.add("dark")):(localStorage.setItem("current-theme","light"),document.documentElement.classList.remove("dark")):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})(),window.updateMermaidTheme=()=>{if(typeof mermaid!="undefined"){const e=document.documentElement.classList.contains("dark"),t=document.querySelectorAll("pre.mermaid");t.forEach(e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)}),e?(initMermaidDark(),mermaid.run()):(initMermaidLight(),mermaid.run())}};function change_color_mode(){localStorage.getItem("current-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("current-theme","dark"),change_discussion_color_mode(),updateMermaidTheme()):(document.documentElement.classList.remove("dark"),localStorage.setItem("current-theme","light"),change_discussion_color_mode(),updateMermaidTheme())}function change_discussion_color_mode(){const t=localStorage.getItem("current-theme")==="light"?"light":"dark",n={setConfig:{theme:t}},e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:n},"https://giscus.app")}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("header-theme-button").addEventListener("click",change_color_mode)})</script><link rel=icon type=image/x-icon href=https://ecwuuuuu.com/favicon.ico><link rel=stylesheet href=https://ecwuuuuu.com/css/style.min.a2ef72f171e482439bc85467bc32279e915ed41b49ed4103fa249e4eeb7a5f3c.css integrity="sha256-ou9y8XHkgkObyFRnvDInnpFe1BtJ7UED+iSeTut6Xzw="><meta charset=utf-8><title>Making Synology NAS accessible from the Internet using IPv6 and DDNS - ECWU's Notebook</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Homepage and blog for Zhenghao Wu (ECWU), sharing thoughts on technology, everyday experiences, and photography. Engaging with the community through knowledge sharing."><meta name=keywords content="NAS,Synology,DS918+,DDNS,Networking,Cloudflare,Domain,HTTPS"><meta name=author content="ECWUUUUU"><script>(function(){const e=localStorage.getItem("current-theme");e===null?window.matchMedia("(prefers-color-scheme: dark)").matches?(localStorage.setItem("current-theme","dark"),document.documentElement.classList.add("dark")):(localStorage.setItem("current-theme","light"),document.documentElement.classList.remove("dark")):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")})(),window.updateMermaidTheme=()=>{if(typeof mermaid!="undefined"){const e=document.documentElement.classList.contains("dark"),t=document.querySelectorAll("pre.mermaid");t.forEach(e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)}),e?(initMermaidDark(),mermaid.run()):(initMermaidLight(),mermaid.run())}};function change_color_mode(){localStorage.getItem("current-theme")==="light"?(document.documentElement.classList.add("dark"),localStorage.setItem("current-theme","dark"),change_discussion_color_mode(),updateMermaidTheme()):(document.documentElement.classList.remove("dark"),localStorage.setItem("current-theme","light"),change_discussion_color_mode(),updateMermaidTheme())}function change_discussion_color_mode(){const t=localStorage.getItem("current-theme")==="light"?"light":"dark",n={setConfig:{theme:t}},e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:n},"https://giscus.app")}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("header-theme-button").addEventListener("click",change_color_mode)})</script></head><body class="transition-colors duration-300"><div class=pt-6><div class="nav-title flex flex-row flex-wrap gap-2"><a href=https://ecwuuuuu.com/><svg class="w-36 fill-gray-900 dark:fill-gray-200" fill="currentColor" viewBox="0 0 204.24 43.44"><path d="M0 43.08V.36h18.24v5.76H6.12v12.54h10.56v5.76H6.12v12.54h12.12v6.12H0z"/><path d="M41.64 30.9v2.64c0 1.32-.25 2.57-.75 3.75s-1.19 2.23-2.07 3.15-1.91 1.65-3.09 2.19-2.45.81-3.81.81c-1.16.0-2.34-.16-3.54-.48s-2.28-.88-3.24-1.68-1.75-1.83-2.37-3.09c-.62-1.26-.93-2.87-.93-4.83V9.84c0-1.4.24-2.7.72-3.9s1.16-2.24 2.04-3.12 1.93-1.57 3.15-2.07C28.97.25 30.32.0 31.8.0c2.88.0 5.22.94 7.02 2.82.88.92 1.57 2.01 2.07 3.27s.75 2.63.75 4.11v2.4h-6.12v-2.04c0-1.2-.34-2.24-1.02-3.12s-1.6-1.32-2.76-1.32c-1.52.0-2.53.47-3.03 1.41s-.75 2.13-.75 3.57v21.84c0 1.24.27 2.28.81 3.12s1.51 1.26 2.91 1.26c.4.0.83-.07 1.29-.21s.89-.37 1.29-.69c.36-.32.66-.76.9-1.32s.36-1.26.36-2.1v-2.1h6.12z"/><path d="M78.36.36 72 43.08h-5.76l-4.68-27.72h-.12l-4.62 27.72h-5.76L44.7.36h6.48l3.06 27.12h.12l4.8-27.12h4.68l4.98 27.78h.12l2.94-27.78H78.36z"/><path d="M102 .36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16-2.48.78-3.84.78-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36H102z"/><path d="M127.56.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16-2.48.78-3.84.78-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36h6.12z"/><path d="M153.12.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08S147 34.4 147 32.88V.36h6.12z"/><path d="M178.68.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36H165v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08c1.08.0 1.98-.36 2.7-1.08s1.08-1.84 1.08-3.36V.36h6.12z"/><path d="M204.24.36v33.12c0 1.4-.25 2.69-.75 3.87s-1.21 2.23-2.13 3.15-1.98 1.64-3.18 2.16c-1.2.52-2.48.78-3.84.78s-2.63-.26-3.81-.78-2.23-1.24-3.15-2.16c-.92-.92-1.64-1.97-2.16-3.15s-.78-2.47-.78-3.87V.36h6.12v32.52c0 1.52.36 2.64 1.08 3.36s1.62 1.08 2.7 1.08 1.98-.36 2.7-1.08 1.08-1.84 1.08-3.36V.36h6.12z"/></svg><p class=sr-only>ECWU Homepage</p></a></div><nav aria-label=navbar class="mb-3 mr-8"><ol role=list class="flex flex-wrap"><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Home</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/post/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Posts</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/photography/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Photos</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/series/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Series</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/page/about/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>About</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://ecwuuuuu.com/page/friends/ class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Friends</a>
<svg width="16" height="20" viewBox="0 0 16 20" fill="currentColor" aria-hidden="true" class="mr-2 w-4 h-5 fill-gray-300"><path d="M5.697 4.34 8.98 16.532h1.327L7.025 4.341H5.697z"/></svg></div></li><li><div class="flex items-center justify-center"><a href=https://www.travellings.cn/go.html class='mr-2 font-medium text-gray-900 dark:text-gray-200 visited:text-gray-900 dark:visited:text-gray-200'>Travelling</a></div></li></ol></nav><div class="flex items-center space-x-2"><div class="w-6 h-6 inline-flex items-center justify-center rounded-lg bg-white dark:bg-black shadow-inner ring-1 ring-black/5"><i id=header-theme-button data-feather=sun class="site-header-navlink rounded cursor-pointer"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-icon lucide-sun h-4 w-4 block dark:hidden fill-gray-900 dark:fill-gray-200"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon-icon lucide-moon h-4 w-4 hidden dark:block fill-gray-900 dark:fill-gray-200"><path d="M20.985 12.486a9 9 0 11-9.473-9.472c.405-.022.617.46.402.803a6 6 0 008.268 8.268c.344-.215.825-.004.803.401"/></svg></i></div><span class="dark:hidden text-sm">To Dark Mode</span>
<span class="hidden dark:block dark:text-gray-200 text-sm">To Light Mode</span></div></div><figure class="ml-[-12.5vw] mt-12 mb-12 h-96 w-screen relative overflow-hidden"><img class="object-cover object-center w-full h-96" src="https://unsplash.com/photos/d53ZooI5TtM/download?ixid=MnwxMjA3fDB8MXxzZWFyY2h8Mnx8bmFzfGVufDB8fHx8MTY0NDczNDU2OA&amp;force=true&amp;w=2400" alt="Featured Images"><figcaption class="text-sm absolute bottom-0 right-0 pr-5 bg-gray-900 text-gray-500 px-2">Photo by Claudio Schwarz on Unsplash</figcaption></figure><div class="mb-12 mt-16 w-content"><h1 class="text-gray-900 dark:text-gray-200">Making Synology NAS accessible from the Internet using IPv6 and DDNS</h1><h2 class="text-gray-700 dark:text-gray-400">IPv6 Yes! :-)</h2><div class="text-gray-700 dark:text-gray-400"><div class=space-y-1><p><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-signature-icon lucide-signature h-5 w-5 inline-block"><path d="m21 17-2.156-1.868A.5.5.0 0018 15.5v.5a1 1 0 01-1 1h-2a1 1 0 01-1-1c0-2.545-3.991-3.97-8.5-4a1 1 0 000 5c4.153.0 4.745-11.295 5.708-13.5a2.5 2.5.0 113.31 3.284"/><path d="M3 21h18"/></svg> Zhenghao Wu</p><p><span class=mr-2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flag-icon lucide-flag h-5 w-5 inline-block"><path d="M4 22V4a1 1 0 01.4-.8A6 6 0 018 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0120 4v10a1 1 0 01-.4.8A6 6 0 0116 16c-3 0-5-2-8-2a6 6 0 00-4 1.528"/></svg>
Status: Finished
</span><span class=mr-2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-badge-check-icon lucide-badge-check h-5 w-5 inline-block"><path d="M3.85 8.62a4 4 0 014.78-4.77 4 4 0 016.74.0 4 4 0 014.78 4.78 4 4 0 010 6.74 4 4 0 01-4.77 4.78 4 4 0 01-6.75.0 4 4 0 01-4.78-4.77 4 4 0 010-6.76z"/><path d="m9 12 2 2 4-4"/></svg>
Confidence: highly likely
</span><span><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-waypoints-icon lucide-waypoints h-5 w-5 inline-block"><circle cx="12" cy="4.5" r="2.5"/><path d="m10.2 6.3-3.9 3.9"/><circle cx="4.5" cy="12" r="2.5"/><path d="M7 12h10"/><circle cx="19.5" cy="12" r="2.5"/><path d="m13.8 17.7 3.9-3.9"/><circle cx="12" cy="19.5" r="2.5"/></svg>
Importance: 8</span></p><p><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-scroll-text-icon lucide-scroll-text h-5 w-5 inline-block"><path d="M15 12h-5"/><path d="M15 8h-5"/><path d="M19 17V5a2 2 0 00-2-2H4"/><path d="M8 21h12a2 2 0 002-2v-1a1 1 0 00-1-1H11a1 1 0 00-1 1v1a2 2 0 11-4 0V5A2 2 0 102 5v2a1 1 0 001 1h3"/></svg> <a href=#article-info-card>Post Details</a></p></div></div></div><div class="w-content bg-gray-200 dark:bg-gray-800 text-gray-700 dark:text-gray-400 px-5 py-3"><p>This post is part 1 of 8 in the <b>HomeLab</b> series.</p><details class=mt-3><summary class="cursor-pointer hover:text-gray-900 dark:hover:text-gray-200 font-medium">View all articles in this series</summary><ol class="mt-2 ml-8 space-y-1"><li class="list-decimal ml-4"><span class="font-bold text-gray-900 dark:text-gray-100">Making Synology NAS accessible from the Internet using IPv6 and DDNS</span> <span class=text-sm>(current)</span></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/more-on-ipv6-firewall/ class=hover:underline>More on IPv6 Firewall - EUI-64</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-intro/ class=hover:underline>Homelab：我的赛博积木</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-intranet/ class=hover:underline>Homelab：我的赛博积木 - 内网服务</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-internet/ class=hover:underline>Homelab：我的赛博积木 - 公网服务</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-architecture/ class=hover:underline>Homelab：我的赛博积木 - 组成与架构</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-accessing/ class=hover:underline>Homelab：我的赛博积木 - 访问</a></li><li class="list-decimal ml-4"><a href=https://ecwuuuuu.com/post/homelab-journey-future/ class=hover:underline>Homelab：我的赛博积木 - 展望</a></li></ol></details></div><main><article class="prose dark:prose-invert lg:prose-xl md:prose-lg prose-ul:leading-5 prose-ol:leading-5"><section class=mb-8><details closed class=toc><summary>Table of Contents</summary><div class=text-sm><nav id=TableOfContents><ul><li><a href=#some-background>Some Background</a></li><li><a href=#idea>Idea</a></li><li><a href=#implementations>Implementations</a><ul><li><a href=#a-firewall>A. Firewall</a></li><li><a href=#b-synology-ddns>B. Synology DDNS</a></li><li><a href=#c-configuring-dns-cloudflare>C. Configuring DNS (Cloudflare)</a></li><li><a href=#d-https-certificate>D. HTTPS Certificate</a></li><li><a href=#e-security-enhancement>E. Security Enhancement</a></li></ul></li></ul></nav></div></details></section><blockquote><p>Although I majored in computer science, my blog is filled with photography-related content. For balance, I take the opportunity of a recent explore and write down this note. :-)</p></blockquote><blockquote><p>Spoiler alert: This is not the way I currently using to exposed my NAS to the WWW.</p></blockquote><h2 id=some-background>Some Background</h2><p>I own a Synology DS918+ NAS, which was purchased in 2020. Both ports on the NAS are connected to my ASUS AC68U router for redundancy. The ISP in my house is CMCC <label for=sidenote-0 class=sidenote-number></label><input type=checkbox id=sidenote-0 class=sidenote-checkbox>
<span class=sidenote>China Mobile Limited; Chinese: 中国移动通信集团有限公司</span>, so no dedicated IPv4 address.</p><p>For most cases, the <a href=https://quickconnect.to/>Synology QuickConnect</a> service can serve my need. Until I live in Hong Kong for postgraduate study. The service is unusable most of the time.</p><p>Since the MIIT <label for=sidenote-1 class=sidenote-number></label><input type=checkbox id=sidenote-1 class=sidenote-checkbox>
<span class=sidenote>Ministry of Industry and Information Technology</span> already pushing IPv6 landing for years, and some recent IPv6 trials with my friends reported some positive results (i.e. accessible cross different ISP; port 80, 443 are not blocked). So, why not make the NAS accessible from the Internet via IPv6.</p><h2 id=idea>Idea</h2><p>So the plan is to bind the IPv6 address for the NAS to a domain of mine. Which divide into steps:</p><ul><li>Configure the IPv6 firewall setting on the router, make sure the NAS can access via the IPv6 address.</li><li>IPv6 address for the NAS would change, update the AAAA record with DDNS.</li><li>HTTPS certificate for the domain.</li><li>Security enhancement for the Synology DSM.</li></ul><p>I try to avoid handcraft solutions, so the DSM built-in DDNS tool is the first choice, but the DNS I am using is Cloudflare, which isn&rsquo;t supported. I tried one <a href=https://github.com/joshuaavalon/SynologyCloudflareDDNS>solution</a> which can add Cloudflare DDNS support, but the IPv6 address is not passing from the DSM and the script is not working.</p><p>So, I change the plan. Setup a Synology DDNS (a service provided by Synology) first, then create a CNAME rule direct to the Synology URL (the second step will divide into two):</p><ul><li>Previous: <del>Update the AAAA record with DDNS</del></li><li>New:<ul><li>Setup Synology DDNS</li><li>Setup CNAME to the Synology DDNS URL in the DNS provider (Cloudflare in this case)</li></ul></li></ul><h2 id=implementations>Implementations</h2><h3 id=a-firewall>A. Firewall</h3><blockquote><p>The router in my house is Asus AC68U and I use it for demonstration.</p></blockquote><p>For IPv6 firewall settings, go to <code>Advanced Settings > Firewall > IPv6 Firewall</code>. You need to set up <code>Inbound Firewall Rules</code> to expose the service port on your NAS to IPv6. But the problem is how to fill in these rules.</p><p>There are five fields for each rule:</p><ul><li><code>Service Name</code>: Name of your rule, you can keep it empty.</li><li><code>Remote IP/CIDR</code>: Allowed request IP/CIDR, you can keep it empty if there are no limits.</li><li><code>Local IP</code>: What local IP is allowed for access, you need to set it to the address of your NAS IP (v6).</li><li><code>Port Range</code>: What port is allowed for access, this one has to set according to your service.</li><li><code>Protocol</code>: Protocol for this rules, default is <code>TCP</code>, just keep it this way.</li></ul><p>Usually, you just need to set <code>Local IP</code> and <code>Port Range</code>.</p><h4 id=a1-local-ip>A.1. <code>Local IP</code></h4><p>Assuming the IPv6 IP for the NAS is <code>2001:0db8:85a3:0000:0000:8a2e:0370:7334</code>, you can fill in <code>::0000:8a2e:0370:7334/::ffff:ffff:ffff:ffff</code> in the <code>Local IP</code> field.</p><blockquote><p>An errata and supplements on this &ldquo;mask&rdquo; like Local IP input stuff is posted on <a href=https://ecwuuuuu.com/post/more-on-ipv6-firewall/>here</a>.</p></blockquote><h4 id=a2-port-range>A.2. <code>Port Range</code></h4><p>Just fill in the port of the service you want to allow access to. Here are some of the ports on the Synology NAS.</p><ul><li>Synology DSM (http): <code>5000</code></li><li>Synology DSM (https): <code>5001</code></li><li>Web: <code>80</code></li><li>ssh: <code>22</code></li></ul><p>You can fill in multiple port by range (i.e. <code>80-5001</code>), or input multiple ports and divide them by comma (i.e. <code>80,443,5000</code>)</p><h4 id=a3-one-example>A.3. One example</h4><ul><li><code>Service Name</code>: (Keep it empty)</li><li><code>Remote IP/CIDR</code>: (Keep it empty)</li><li><code>Local IP</code>: <code>::0000:8a2e:0370:7334/::ffff:ffff:ffff:ffff</code></li><li><code>Port Range</code>: <code>80,443,5000,5001</code></li><li><code>Protocol</code>: <code>TCP</code></li></ul><h4 id=a4-tips>A.4. Tips</h4><ul><li>Rules do not allow changes once it saved and display for those existing rules will truncate those long IP (like the <code>Local IP</code> field). Make sure you have an backup of your settings.</li><li>You can just turn off the IPv6 Firewall (any requests are allowed) for debugging purposes, but a proper firewall setting is strongly recommended for production environments.</li></ul><h3 id=b-synology-ddns>B. Synology DDNS</h3><blockquote><p>Steps are based on the article from Synology Knowledge Base: <a href=https://www.synology.com/en-global/knowledgebase/DSM/help/DSM/AdminCenter/connection_ddns>DDNS > Setting up DDNS</a></p></blockquote><p>You can point an existing hostname at the IP address of your Synology NAS, or register for a new one provided by Synology or several other DDNS providers. Please consult each provider for more details regarding hostname registration.</p><p>To set up a DDNS hostname, first go to the DDNS settings <code>Control Panel > Connectivity > External Access > DDNS</code>:</p><ol><li>Click the Add button.</li><li>A dialog box appears prompting you to edit the following settings:<ul><li>Service provider: Choose Synology from the drop-down menu for a free hostname provided by Synology.</li><li>Hostname: Enter a registered DDNS hostname, such as <code>john.synology.me</code>.</li><li>Email: Will be auto fill in by the DSM.</li><li>External address: Set IPv4 to 0.0.0.0 and leave IPv6 as default (System should automatically fill in the IPv6 address).</li><li>Heartbeat: Enable it.</li></ul></li><li>Click Test Connection to see if settings are correct.</li><li>Click OK to save and finish.</li><li>If you have selected Synology as the service provider, a message box will appear if there&rsquo;s no matching SSL certificate for your DDNS hostname, recommending you to sign a Let’s Encrypt certificate for the hostname and set it as the default certificate. Click No, will cover this in Part D.</li></ol><ul><li>After setup is complete, you can access your Synology NAS over the Internet by entering the DDNS hostname in a web browser.</li></ul><h3 id=c-configuring-dns-cloudflare>C. Configuring DNS (Cloudflare)</h3><p>Now, you should be able to access the synology DSM via <code>john.synology.me</code>. We can add some DNS configurations so you can access the site from your own domain.</p><p>I am using the free plan from Cloudflare. A CNAME record is what we need. In my case, I just add one new CNAME record with <code>Name: mynas</code>, <code>Target: john.synology.me</code>, <code>TTL: Auto</code>, <code>Proxy status: DNS only</code>.</p><p>After you save the new record and wait for some second for the Cloudflare to flush their record. You can access the synology DSM via <code>mynas.yourdomain.com</code></p><h4 id=c1-enable-dnssec>C.1. Enable DNSSEC</h4><p>DNSSEC <label for=sidenote-3 class=sidenote-number></label><input type=checkbox id=sidenote-3 class=sidenote-checkbox>
<span class=sidenote>Domain Name System Security Extensions</span> uses public-key cryptography to ensure the security of DNS resolving the domain name.</p><p>I also noticed that I need to enable DNSSEC so that I can successfully apply a free certificate from Let&rsquo;s Encrypt (Cover in Part D).</p><p>If your domain is host by Cloudflare, this should be very easy. But this is not the case (like me), you have to add another DS record to your domain registrar. You can check the <a href=https://support.cloudflare.com/hc/en-us/articles/360006660072-Understanding-and-configuring-DNSSEC-in-Cloudflare-DNS>document</a> from Cloudflare for more details.</p><h3 id=d-https-certificate>D. HTTPS Certificate</h3><p>It will more safe to enable HTTPS certificate for the DSM. And we will choice the free SSL/TLS certificates from Let&rsquo;s Encrypt. This can be done via the GUI in the DSM.</p><blockquote><p>Steps are based on the article from Synology Knowledge Base: <a href=https://www.synology.com/en-global/knowledgebase/DSM/help/DSM/AdminCenter/connection_certificate>Certificate > Certificates from Let&rsquo;s Encrypt</a></p></blockquote><p>First go to the UI: <code>Control Panel > Security > Certificate</code>.</p><ol><li>Click Add.</li><li>Select Add a new certificate and click Next.</li><li>Select Get a certificate from Let&rsquo;s Encrypt.</li><li>Enter the following information:<ul><li>Domain name: Enter the domain you have registered from the domain provider, here we use <code>mynas.yourdomain.com</code> as example.</li><li>Email: Enter the email address used for certificate registration.</li><li>Subject Alternative Name: Keep it blank.</li></ul></li><li>Click Apply to save the settings. Once confirmed, the certificate will be instantly imported into your Synology NAS.</li></ol><p>Now, when you access your NAS via <code>mynas.yourdomain.com</code>, the traffic is encrypted.</p><h3 id=e-security-enhancement>E. Security Enhancement</h3><p>If you expose your server to the Internet, there will be unavoidable crawlers, port scanners, enumeration attackers try to access your NAS without your condonement. If you are using some weak passwords or there are some weaknesses in the system, your device and data will be in threat. There are some of the fixes you can do.</p><ul><li>Remove useless user account</li><li>Increase Password Strength for Admin account</li><li>Enable 2FA for Admin account<ul><li>Steps for above check <a href=https://www.synology.com/en-global/knowledgebase/DSM/help/DSM/AdminCenter/file_user_desc>here</a> and <a href=https://www.synology.com/en-global/knowledgebase/DSM/help/DSM/AdminCenter/file_user_advanced>here</a>.</li></ul></li><li>Change default ports for services<ul><li>Like ssh(22), steps can be found <a href=https://www.synology.com/cgi/knowledgebase/findHelpFile/dsm/dsm/6.0/enu/6.0-7321/synology_armada370_ds115j/100/AdminCenter/system_terminal.html>here</a>.</li></ul></li></ul></article></main><div class="pb-10 w-content"><div class="bg-white dark:bg-gray-900 drop-shadow-lg overflow-hidden sm:rounded-lg"><div class="px-4 py-5 sm:px-6"><h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-gray-200"><a id=article-info-card></a>Article Card</h3><p class="mt-1 text-sm text-gray-500">For "<span class=italic>Making Synology NAS accessible from the Internet using IPv6 and DDNS</span>"</p></div><div class="border-t border-gray-200 dark:border-gray-700"><dl><table class="border-collapse table-fixed w-full"><tbody class="bg-white dark:bg-gray-800"><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Author</td><td class="border-b font-bold border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm">Zhenghao Wu</td></tr><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Publish & Update Date</td><td class="font-bold border-b border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm">2021-04-04</td></tr><tr class="px-4 py-5"><th class="text-left border-b border-gray-100 dark:border-gray-700 pl-6 dark:text-gray-500 w-1/3 px-4 py-5 text-sm font-medium text-gray-500">Tags</td><td class="font-bold border-b border-gray-100 dark:border-gray-700 p-4 pl-8 text-gray-500 dark:text-gray-400 mt-1 px-4 py-5 text-sm"><a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/nas>NAS</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/synology>Synology</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/ds918+>DS918+</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/ddns>DDNS</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/networking>Networking</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/cloudflare>Cloudflare</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/domain>Domain</a>
<a class="rounded inline-block mt-1 mb-1 py-1 px-2 text-xs font-medium text-white bg-gray-900 visited:text-white dark:visited:text-white" href=https://ecwuuuuu.com/tags/https>HTTPS</a></td></tr></tbody></table></div></div></div><div class="pb-10 w-content"><script src=https://giscus.app/client.js data-repo=ecwu/ecwu.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxNjQzMzE1NjY=" data-category="Blog Post Discussion" data-category-id=DIC_kwDOCcuALs4CObNl data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=botton data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div><section class=mb-10><hr><h2 class="text-gray-900 dark:text-gray-200">Related Posts</h2><ul class="list-disc list-inside text-gray-900 dark:text-gray-200"><li><a href=https://ecwuuuuu.com/post/new-domain/>I am initiating a new domain!</a></li><li><a href=https://ecwuuuuu.com/post/homelab-journey-future/>Homelab：我的赛博积木 - 展望</a></li><li><a href=https://ecwuuuuu.com/post/homelab-journey-intro/>Homelab：我的赛博积木</a></li></ul></section><div><footer class="relative mb-6 text-gray-900 dark:text-gray-200"><hr class=pb-5><div class="flex justify-begin w-full mx-auto mb-2"><ul class="flex flex-row justify-begin text-lg space-x-2"><li><a href=https://ecwuuuuu.com/index.xml aria-label=RSS class="round-button social-button"><svg width="16" height="16" fill="currentColor" class="w-5 h-5 fill-gray-700 hover:fill-gray-900 dark:fill-gray-400 dark:hover:fill-gray-200" viewBox="0 0 16 16"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2H2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2zm0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2zm.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3z"/></svg></a></li></ul></div><p>Powered by <a href=https://gohugo.io>Hugo</a> and <a href=https://github.com/ecwu/ecwu-theme>ecwu-theme</a>.
Build by GitHub Actions at: 2025-10-29 22:30 CST.</p><p>&copy;2025
ECWUUUUU.
All rights reserved.</p><p><a href=http://beian.miit.gov.cn/>粤 ICP 备 17015575 号 - 1</a></p><p class="text-sm my-4">Google Analytics enabled | <a href=https://ecwuuuuu.com/page/changelog>site changelog</a></p></footer></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-HSPDSQWH5L"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HSPDSQWH5L")}</script></body></html>